<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>表单验证</title>
	<link rel="stylesheet" href="">
	<style>
		p{
			position: relative;
			height:40px;
			line-height:40px;
			font-weight:bold;
		}
		input[type="text"]{
			height: 25px;
			width: 200px;
		}
		#btn{
			margin: 0 10px;
			background: #2f79ba;
			border:0;
			height:31px;
			width:50px;
			font-size: 14px;
			font-weight:bold;
			color: #fff;
			border-radius: 10px;
			outline: none;
		}
		span{
			position: absolute;
			left:40px;
			top:30px;
			color:#ccc;
		}
	</style>
</head>
<body>
<form action="" method="post">
	<p>名称 <input type="text"><input id="btn" type="submit" value="验证"><span>必填，长度为4~16个字符</span></p>
</form>
</body>
<script type="text/javascript">
 	btn.addEventListener('click',checkInput,false);//冒泡
	function checkInput(e){
		    e.preventDefault();
			var text = this.previousSibling.value;
        	text = text.replace(/\s/ig,'');
        	var span = this.parentNode.lastChild;
        	var input = document.getElementsByTagName('input')[0]
        	if(countLength(text) < 4 || countLength(text) > 16){
        		span.innerHTML = '名称格式错误';
        		span.style.color = "red";
        		input.style.outlineColor = "red";
        		input.focus();
        		
        	}else{
        		span.innerHTML = '名称格式正确';
        		span.style.color = "green";
        		input.style.outlineColor = "green";
        		input.focus();
        	}
	}
	function countLength(str) {
		var inputLength = 0;
		for(var i=0;i<str.length;i++){
			var inputCode = str.charCodeAt(i);//返回指定位置字符的Unicode编码
			if(inputCode >= 0 && inputCode <=128){
				inputLength ++;
			}else{
				inputLength +=2;
			}
		}
		return inputLength;
	}
</script>
</html>